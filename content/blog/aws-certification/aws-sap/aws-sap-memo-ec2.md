---
title: "AWS-SAP 模試メモ - Amazon EC2"
date: 2021-01-24T14:06:47+09:00
draft: false

# post thumb
# image: "images/xxxxx.jpg"

# meta description
description: "AWS-SAP の模擬試験を受けての復習メモ"

# taxonomies
categories:
  - "AWS-SAP"
tags:
  - "AWS"
  - "SAP"
  - "ソリューションアーキテクトプロフェッショナル"
  - "Amazon EC2"

# post type
type: "featured"
---

# Amazon EC2

## ハードコードされたIPの扱い
ハードコードされたIPアドレスを有するEC2インスタンスに導入されているシステムのフェールオーバーを実現する場合を考えます。

ハードコードされたIPアドレスを利用しているため、フェールオーバー先のインスタンスと既存インスタンスで同じIPアドレスを利用することになります。そのためには、IPアドレスごと移動する方法が必要となるため、対応としてはElastic Network Interface（ENI）を活用します。ENIは、仮想ネットワークカードを表す VPC 内の論理ネットワーキングコンポーネントです。

#### セカンダリーENIを作成し、フェールオーバー用インスタンスに移動できるようにする
セカンダリーネットワークインターフェイスは実行中であっても、インスタンスからデタッチされ、別のインスタンスに再アタッチすることができます。その際はIPアドレスなどの属性を継続的に利用できます。したがって、ネットワークインターフェイスをあるインスタンスから別のインスタンスに移動すると、ネットワークトラフィックは新しいインスタンスにリダイレクトされます。 

もし、そのインスタンスに障害が起きた場合、セカンダリIPアドレスを同じサブネットに存在する別のインスタンスに再アサインすることによって、IPアドレスのフェイルオーバー を実現することができます。 

## DB 書き込みスループットの高速化

#### RAID 0 構成の追加
データベースをホストしているEC2インスタンスにEBSボリュームを追加し、RAID 0 構成を実現します。

RAID 0 では複数のボリュームをまとめてストライピング構成が実施できます。RAID 0 構成により、I/O がストライプ内のボリュームにわたって分散されます。ボリュームを追加すると、スループットと IOPS を追加したことになり、スループットを向上させます。

#### インスタンスタイプの変更

一部のEC2インスタンスタイプは、単一のEBSボリュームにプロビジョニングできるものよりも多くのI / Oスループットを駆動できます。 RAID 0構成で複数のgp2、io1、st1、またはsc1ボリュームを結合して、これらのインスタンスで利用可能な帯域幅を使用できます。



## パフォーマンス向上

#### HVM AMI
HVM AMI は、完全に仮想化された一連のハードウェアを備えており、イメージのルートブロックデバイスのマスターブートレコードを実行することによって起動します。この仮想化タイプでは、ベアメタルハードウェア上でオペレーティングシステムが動作するのと同様に、修正を行わなくても仮想マシン上でオペレーティングシステムを直接実行することができます。PV AMIとは異なり、HVM AMIは、ホストシステム上の基盤となるハードウェアへの高速なアクセスを可能にするハードウェア拡張を利用できます。

なお、パフォーマンス向上のためには PVC AMI よりも HVM AMI の使用が推奨されています。

#### 拡張ネットワーキング
拡張ネットワーキングでは、シングルルート I/O 仮想化 (SR-IOV) を使用して、サポートされるインスタンスタイプにおける高性能ネットワーキング機能が提供されます。SR-IOV は、従来の仮想化ネットワークインターフェイスと比較し、I/O パフォーマンスが高く、CPU 利用率が低いデバイス仮想化の手法です。拡張ネットワーキングは、高い帯域幅、1 秒あたりのパケット (PPS) の高いパフォーマンス、常に低いインスタンス間レイテンシーを実現します。 

